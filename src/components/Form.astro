<div class="w-full max-w-screen-lg text-center mx-auto mt-24 px-8">
  <h2 class="text-5xl mb-8 text-gray-950" id="rsvp">
    Kommer du til vores store dag?
  </h2>
  <p class="text-2xl/10 text-gray-700">
    Sig ja til os ved at udfylde formularen her, så klarer vi resten og sørger
    for en dejlig dag. <strong>Husk </strong> at sende en formular for hver gæst
    du tager med.
  </p>
</div>
<div class="w-full max-w-screen-md mx-auto text-2xl mt-12">
  <form id="guest-form">
    <div class="space-y-6">
      <label class="text-stone-700 block">
        <p>Navn</p>
        <input
          name="name"
          type="text"
          class="w-full border text-2xl bg-white/50 border-black/20 rounded-sm mt-1"
          required
        />
      </label>
      <label class="text-stone-700 block">
        <p>Email</p>
        <input
          name="email"
          type="email"
          class="w-full border text-2xl bg-white/50 border-black/20 rounded-sm mt-1"
          required
        />
      </label>
      <label class="text-stone-700 block">
        <p>Har du nogle allergier vi skal være opmærksomme på?</p>
        <input
          name="allergies"
          type="text"
          class="w-full border text-2xl bg-white/50 border-black/20 rounded-sm mt-1"
        />
      </label>
      <fieldset
        class="grid grid-cols-2 md:grid-cols-4 border border-black/20 py-6 px-4 rounded-sm"
      >
        <legend class="text-stone-700">Hvor sover du?</legend>
        <label class="text-stone-700 flex items-center">
          <input
            type="radio"
            name="sleeping"
            value="sleeping_sale"
            class="border bg-white/50 border-black/20"
          />
          <p class="ml-2">Sovesal</p>
        </label>
        <label class="text-stone-700 flex items-center">
          <input
            type="radio"
            name="sleeping"
            value="camping_wagon"
            class="border bg-white/50 border-black/20"
          />
          <p class="ml-2">Campingvogn</p>
        </label>
        <label class="text-stone-700 flex items-center">
          <input
            type="radio"
            name="sleeping"
            value="sleep_in_tent"
            class="border bg-white/50 border-black/20"
          />
          <p class="ml-2">Telt</p>
        </label>
        <label class="text-stone-700 flex items-center">
          <input
            type="radio"
            name="sleeping"
            value="sleep_elsewhere"
            class="border bg-white/50 border-black/20"
            checked
          />
          <p class="ml-2">Andet</p>
        </label>
      </fieldset>
      <button
        class="block w-full bg-black/5 h-14 text-center border border-black/25 rounded-sm"
        >Send</button
      >
    </div>
  </form>
</div>

<script>
  const form = document.getElementById("guest-form") as HTMLFormElement;
  form.addEventListener("submit", (event) => {
    event.preventDefault();
    const data = new FormData(form);
    const name = data.get("name");
    const firstName = name?.toString().split(" ")[0];
    fetch("https://api.sheetmonkey.io/form/tqdZvSf6rrtNnoSUbkGpTa", {
      method: "POST",
      body: data,
    })
      .then(() => {
        form.reset();
        form.querySelector("input")?.focus();
        alert(`Vi glæder os til at se dig, ${firstName}!`);
      })
      .catch((error) => {
        alert(
          `Åh nej, noget gik galt. Sig til Jeppe at den siger ${error.toString()} og er dum.`,
        );
      });
  });
</script>
